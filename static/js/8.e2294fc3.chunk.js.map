{"version":3,"sources":["components/00-General/login.js"],"names":["Login","props","closeLogin","$","removeClass","addClass","setTimeout","dispatch","toggleIsShowLogin","changeValue","isReg","fadeOut","fadeIn","doLogin","e","preventDefault","username","val","password","authUser","falseIsShowLogin","cookies","remove","path","doRegister","firstname","lastname","email","password2","validateField","prop","urlRegister","url","ajax","done","result","error","console","log","fail","data","alert","statusText","always","process","bind","this","fieldName","value","methods","i","length","eval","html","test","className","onClick","alt","src","id","role","data-toggle","href","aria-controls","aria-selected","aria-labelledby","action","onSubmit","type","aria-describedby","placeholder","data-placement","title","React","Component","mapStateToProps","state","isShowLogin","navigation","user","connect","withCookies"],"mappings":"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","file":"static/js/8.e2294fc3.chunk.js","sourcesContent":["import React from 'react';\nimport './login.css';\nimport $ from 'jquery';\nimport { connect } from 'react-redux';\n\nimport { withCookies, Cookies } from 'react-cookie';\nimport { instanceOf } from 'prop-types';\n\n\n//Actions\nimport { authUser } from '../../actions/user';\nimport { falseIsShowLogin, toggleIsShowLogin } from '../../actions/navigation';\n\nclass Login extends React.Component {\n    static propTypes = {\n        cookies: instanceOf(Cookies).isRequired\n    };\n\n    constructor(props) {\n        super(props);\n        const { cookies } = props;\n        this.cookies = cookies;\n        this.isReg = true;\n        this.url = process.env.REACT_APP_PATH_API;\n\n        this.doLogin = this.doLogin.bind(this);\n        this.doRegister = this.doRegister.bind(this);\n    }\n\n    componentDidMount() {\n        $('.login-info-box').fadeOut();\n        $('.login-show').addClass('show-log-panel');\n        this.isReg = true;\n    }\n\n    closeLogin = () => {\n        $('.login-mask').removeClass('bounceInDown');\n        $('.login-mask').addClass('bounceOutUp');\n        $('.login-mask').addClass('animated');\n\n        setTimeout(() => this.props.dispatch(toggleIsShowLogin())\n            , 1000);\n    }\n\n    changeValue = () => {\n        if (this.isReg) {\n            $('.register-info-box').fadeOut();\n            $('.login-info-box').fadeIn();\n\n            $('.white-panel').addClass('right-log');\n            $('.register-show').addClass('show-log-panel');\n            $('.login-show').removeClass('show-log-panel');\n        }\n        else {\n\n            $('.register-info-box').fadeIn();\n            $('.login-info-box').fadeOut();\n\n            $('.white-panel').removeClass('right-log');\n\n            $('.login-show').addClass('show-log-panel');\n            $('.register-show').removeClass('show-log-panel');\n        }\n        this.isReg = !this.isReg;\n    }\n\n    doLogin = (e) => {\n        e.preventDefault();\n        // console.log(\"login\");\n        const username = $('#login_email').val();\n        const password = $('#login_password').val();\n\n        this.props.dispatch(authUser(\n            username, password,\n            () => {\n                this.props.dispatch(falseIsShowLogin());\n            },\n            () => {\n                this.cookies.remove(\"token\", { path: '/' });\n            }\n        ));\n    }\n\n    doRegister = (e) => {\n      \n        e.preventDefault();\n        let isFieldsOk = true;\n\n        let firstname = $(\"#register_firstname\").val();\n        let lastname = $(\"#register_lastname\").val();\n        let username = $(\"#register_username\").val();\n        let email = $('#register_email').val();\n        let password = $('#register_password').val();\n        let password2 = $('#register_password_c').val();\n\n\n        isFieldsOk =\n            this.validateField(\"#register_firstname\", firstname, [\"isRequired\"]) &\n            this.validateField(\"#register_username\", username, [\"isRequired\"]) &\n            this.validateField(\"#register_email\", email, [\"isRequired\", \"isEmail\"]) &\n            this.validateField(\"#register_password\", password, [\"isRequired\"]) &\n            this.validateField(\"#register_password_c\", password2, [\"isRequired\"])\n            ;\n\n        if (isFieldsOk) {\n            $(\"#register_btn\").prop('disabled', true);\n            $(\".evaluatz_mask_load\").removeClass(\"hidden\");\n            let urlRegister = `${this.url}/signup/classic?firstname=${firstname}&lastname=${lastname}&username=${username}&email=${email}&password=${password}`;\n            $.ajax(urlRegister)\n                .done((result) => {\n                    try {\n\n                        $('#login_email').val(username);\n                        $('#login_password').val(password);\n                        this.doLogin(e);\n                    } catch (error) {\n                        console.log(error);\n\n                    }\n                })\n                .fail(function (data) {\n                    alert(data.statusText);\n                })\n                .always(function () {\n                    $(\".evaluatz_mask_load\").addClass(\"hidden\");\n                    $(\"#register_btn\").prop('disabled', false);\n                });\n        }\n    }\n\n    validateField(fieldName, value, methods) {\n        for (let i = 0; i < methods.length; i++) {\n            let error = eval(\"this.\" + methods[i] + \"(value)\");\n            if (error) {\n                $(fieldName).addClass(\"evaluatz_input_error\");\n                $(fieldName + \"_error\").removeClass(\"d-none\");\n                $(fieldName + \"_error\").html(error);\n                return false;\n            }\n        }\n        $(fieldName).removeClass(\"evaluatz_input_error\");\n        $(fieldName + \"_error\").addClass(\"d-none\");\n        return true;\n    }\n\n    isRequired(value) {\n        if (value.length > 0) {\n            return \"\";\n        } else {\n            return \"Value is required\";\n        }\n    }\n\n    isEmail(value) {\n        if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(value)) {\n            return \"\";\n        } else {\n            return \"Invalid email address\";\n        }\n    };\n\n\n    render() {\n        return (\n            <div className=\"login-mask bounceInDown animated faster\" >\n\n                <div className=\"login-mask-close\" onClick={this.closeLogin}>\n                    <div>X</div>\n                </div>\n                <div className=\"evaluatz_login_container\">\n                    <img alt=\"\" src=\"/logox70.png\"></img>\n                    <div className=\"evaluatz_login_inner_container text-white\" >\n\n\n                        <div className=\"nav nav-tabs\" id=\"nav-tab\" role=\"tablist\">\n                            <a className=\"nav-item nav-link active\" id=\"nav-home-tab\" data-toggle=\"tab\" href=\"#nav-login\" role=\"tab\" aria-controls=\"nav-login\" aria-selected=\"true\">Login</a>\n                            <a className=\"nav-item nav-link\" id=\"nav-profile-tab\" data-toggle=\"tab\" href=\"#nav-register\" role=\"tab\" aria-controls=\"nav-register\" aria-selected=\"false\">Register</a>\n                        </div>\n\n                        <div className=\"tab-content\" id=\"nav-tabContent\">\n                            <div className=\"tab-pane fade show active\" id=\"nav-login\" role=\"tabpanel\" aria-labelledby=\"nav-home-tab\">\n                                <form action=\"/\" onSubmit={this.doLogin} className=\"evaluatz_form_login\">\n                                    <div className=\"form-group\">\n                                        <input type=\"text\" className=\"form-control\" id=\"login_email\" aria-describedby=\"emailHelp\" placeholder=\"Enter email\" />\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <input type=\"password\" className=\"form-control\" id=\"login_password\" placeholder=\"Password\" />\n                                        <small id=\"login_error\" className=\"evaluatz_error_text mb-2\">{this.props.error}</small>\n                                    </div>\n\n                                    <button type=\"submit\" id=\"login_btn\" className=\"btn btn-secondary evaluatz_login_submit\" >Login</button>\n                                </form>\n                            </div>\n                            <div className=\"tab-pane fade\" id=\"nav-register\" role=\"tabpanel\" aria-labelledby=\"nav-profile-tab\">\n                                <form action=\"/\"  onSubmit={this.doRegister} className=\"evaluatz_form_register \">\n                                    <div className=\"form-group\">\n                                        <input type=\"text\" className=\"form-control\" id=\"register_firstname\" aria-describedby=\"emailHelp\" placeholder=\"First name\" data-toggle=\"tooltip\" data-placement=\"right\" title=\"Tooltip on right\" />\n                                        <small id=\"register_firstname_error\" className=\"evaluatz_error_text d-none\"></small>\n\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <input type=\"text\" className=\"form-control\" id=\"register_lastname\" aria-describedby=\"emailHelp\" placeholder=\"Last name\" />\n                                        <small id=\"register_lastname_error\" className=\"evaluatz_error_text d-none\"></small>\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <input type=\"email\" className=\"form-control\" id=\"register_email\" aria-describedby=\"emailHelp\" placeholder=\"Enter email\" />\n                                        <small id=\"register_email_error\" className=\"evaluatz_error_text d-none\"></small>\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <input type=\"text\" className=\"form-control\" id=\"register_username\" aria-describedby=\"emailHelp\" placeholder=\"Username\" />\n                                        <small id=\"register_username_error\" className=\"evaluatz_error_text d-none\"></small>\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <input type=\"password\" className=\"form-control\" id=\"register_password\" placeholder=\"Password\" />\n                                        <small id=\"register_password_error\" className=\"evaluatz_error_text d-none\"></small>\n                                    </div>\n                                    <div className=\"form-group\">\n                                        <input type=\"password\" className=\"form-control\" id=\"register_password_c\" placeholder=\"Confirm Password\" />\n                                        <small id=\"register_password_c_error\" className=\"evaluatz_error_text d-none\"></small>\n                                    </div>\n                                    <button type=\"submit\" id=\"register_btn\" className=\"btn btn-secondary evaluatz_login_submit\" >Register</button>\n                                </form>\n                            </div>\n                        </div>\n\n                        <div className=\"evaluatz_login_social_container\">\n                            <a href=\"#\" className=\"evaluatz_login_social_container_item text-white evaluatz_btn-facebook\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Facebook\">\n                                <i className=\"fa fa-facebook fa-2x\"></i>\n                                <span className=\"hidden-xs\"></span>\n                            </a>\n                            <a href={this.url + \"/auth/getGoogleAuthLink\"} className=\"evaluatz_login_social_container_item text-white evaluatz_btn-google-plus\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"Google Plus\">\n                                <i className=\"fa fa-google-plus fa-2x\"></i>\n                                <span className=\"hidden-xs\"></span>\n                            </a>\n                            <a href=\"#\" className=\"evaluatz_login_social_container_item text-white evaluatz_btn-github\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"GitHub\">\n                                <i className=\"fa fa-github fa-2x\"></i>\n                                <span className=\"hidden-xs\"></span>\n                            </a>\n                        </div>\n\n                    </div>\n                </div>\n\n\n\n            </div>\n        )\n    }\n}\n\n\nconst mapStateToProps = (state) => {\n    return {\n        isShowLogin: state.navigation.isShowLogin,\n        error: state.user.error\n    };\n};\n\nexport default connect(mapStateToProps)(withCookies(Login));"],"sourceRoot":""}